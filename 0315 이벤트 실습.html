<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- input 태그와 button을 이용한 이벤트 연습 -->
    <p>아래 숫자를 입력하면 구구단을 p태그로 출력합니다</p>
    <input type="number" id="dan" value="">
    <button onclick="gugudanPrint(dan)"> 단 확인 </button>
    <div id = "gugudan">
        <p></p>
    </div>

    <!-- 버튼 안에 글자가 안녕하세요로 바뀌는 함수 -->
    <button id="btn2" type= "button" onclick="printTest()">버튼</button>
    <!-- p에 마우스를 올렸을떄 -->
    <p id="p1" onmouseenter="changeColor1()">마우스를 올리면 글자가 빨간색으로 바뀝니다</p>
    <!-- p에 마우스가 빠져나갔을 때 -->
    <p id="p2" onmouseleave="changeColor2()">마우스를 빠져나가면 글자가 파란색으로 바뀝니다 </p>
    <!-- p에 엔터 리브 했을 때 -->
    <p id="p3" onmouseenter="mouseEnter()" onmouseleave="mouseLeave()">마우스를 올리면 글자가 빨간색으로, 마우스가 빠져나가면 파란색으로 바뀝니다</p>
    <!-- input 태그에 onfocus, onblur -->
    <input type="text" onfocus="onFocus()" onblur="onBlur()" id="input2">
    <button>확인</button>
    <br><br>
    <!-- JS에 DOM으로 들고와서 메소드로 이벤트 추가 -->
    <button id="btn">메소드로 이벤트를 추가</button>
    <!--  -->
    <p id="p4">마우스르 올리면 빨간색으로 바뀌는 이벤트를 추가</p>
    <ul id="ullist">
        <li>첫 번째</li>
        <li>두 번째</li>
        <li>세 번째</li>
    </ul>

    <!-- 이벤트 객체를 사용하기위한 태그 -->
    <p onclick="printText()">태그를 클릭하면 글자가 바뀝니다</p>
    <!-- 동일한 이벤트와 함수를 연결 -->
    <p id="p5">태그를 클릭하면 글자가 바뀝니다</p>

    <!-- p 태그에 addEventListener를 통해 이벤트 2개 작성 -->
    <p id="p6">
        태그를 클릭하면 글자색이 파랑
        태그를 더블클릭하면 백그라운드 회색
    </p>

    <!-- h3 태그를 만들어서 미리 만든 changeColor 사용 -->
    <h3 id="h3">이벤트 객체를 사용하면 동일한 함수를 다른 태그에도 사용 가능</h3>

    <!-- changeColor 클릭/더블클릭했을 떄 함수 실행 -->
    <ul id="ullist2">
        <li>이벤트가 적용된 태그입니다</li>
        <li>이벤트가 적용된 태그입니다</li>
        <li>이벤트가 적용된 태그입니다</li>
        <li>이벤트가 적용된 태그입니다</li>
        <li>이벤트가 적용된 태그입니다</li>
    </ul>

    <!-- 이벤트리스너를 통해 함수를 전달할 때 인수값을 직접 전달 -->
    <!-- 각 DOM의 innerHTML 값을 함수에 인수값으로 넣어줌 -->
    <!-- 클릭 이벤트가 발생했을 때, innerHTML 값이 바뀌는 함수 -->
    <p id="p05">5번 째 태그</p>
    <p id="p06">6번 째 태그</p>
    <p id="p07">7번 째 태그</p>
    


    <script>
        function gugudanPrint() {
            // 구구단을 출력하기 위해 입력받은 숫자값 들고옴
            let dan = document.querySelector("#dan").value;
            // p태그로 출력 - innerHTML
            // 1~9까지 내용이 반복됨
            let p = document.querySelector("#gugudan>p")
            p.innerHTML = ""
            // for문을 이용하여 구구단 출력
            for (let i=1; i<10; i++) {
                // 바로 innerHTML로 할당을 하면 이전 값이 사라짐
                // 이전 값을 살리기 위해서 이전 문자열과 더해서 출력
                p.innerHTML += `${dan}x${i}=${Number(dan)*i} `
            }

        // ul 태그를 만들어서 li 생성하여 출력
        // 1) ul 태그 생성 - createElement('ul')
        // 2) li 태그안에 dan*1이 들어간 태그 9개 생성 - innerHTML
        // 3) li 태그로 생성된 요소를 ul 태그에 추가
        // 4) ul 태그도 body에 추가 - appendChild
        let ul = document.createElement('ul');
        for(let i=1; i<=9; i++) {
            let li = document.createElement('li');
            li.innerHTML = `${dan}x${i}=${Number(dan)*i}`
            ul.appendChild(li);
        }
        // 함수 안에서 사용되는 변수는 지역변수
        // 이벤트 발생 할때마다 함수가 실행될떄 동일한 이름으로 계속 사용가능
        let body = document.querySelector("body");
        body.appendChild(ul);
    }

    // 버튼 안에 글자가 안녕하세요로 바뀌는 함수 작성
    function printTest() {
            let button = document.querySelector("#btn2");
            button.innerText = "안녕하세요";
        }
    // p 태그에 마우스를 올리면 글자가 빨간색으로 바뀝니다
    function changeColor1() {
        let p1 = document.querySelector("#p1")
        p1.style.color = "red"
        }
    // p 태그에서 마우스가 벗어나면 글자가 파란색으로 바뀝니다
    function changeColor2() {
        let p2 = document.querySelector("#p2")
        p2.style.color = "blue"
    }
    // p 태그에 마우스를 올리면 빨강 벗어나면 파랑으로 바뀝니다
    function mouseEnter() {
        let p3 = document.querySelector("#p3")
        p3.style.color = "red"
    }
    function mouseLeave() {
        let p3 = document.querySelector("#p3")
        p3.style.color = "blue"
    }

    // onfocus일 때 gray, onblur일 떄 white
    function onFocus() {
        let onFocus = document.querySelector("#input2")
        onFocus.style.backgroundColor = "gray"
    }
    function onBlur() {
        let onBlur = document.querySelector("#input2")
        onBlur.style.backgroundColor = "white"
    }

    // HTML에서 태그를 DOM 요소 들고와서 메소드로 이벤트 추가
    let btn = document.querySelector("#btn")
    // 가져온 DOM 요소에 이벤트와 실행할 함수
    btn.addEventListener("click",printButton)
    // 가져온 DOM 요소에 이벤트와 실행할 함수
    btn.addEventListener("mouseenter",
        function() {
            btn.innerHTML = "마우스를 올렸습니다"
    })

    // 실행할 함수
    function printButton() {
        btn.innerHTML = "버튼을 눌렀습니다"
    }

    // 리스너를 이용해 마우스를 올리면 빨간색으로 바꾸기
    let p4 = document.querySelector("#p4")
    p4.addEventListener("mouseenter",
        function() {
            p4.style.color = "red"
        }
    )

    // li와 같이 여러개의 태그에 같은 이벤트 추가
    // 배열(auerySelectorAll)로 들고와서 for문
    const liList = document.querySelectorAll("#ullist>li")
    console.log(liList[0])
    for (let i=0; i<liList.length; i++) {
        liList[i].addEventListener("click",
        function() {
            // 랜덤 색바꿈 랜덤 : Math.random(), 색바꿈 : color
            // 랜덤 숫자 : 0~255 -> Math.random*256(정수)
            // 정수로 사용하기 위해 Math.floor()
            let r = Math.floor(Math.random()*256)
            let g = Math.floor(Math.random()*256)
            let b = Math.floor(Math.random()*256)
            liList[i].style.color = `rgb(${r},${g},${b})`
        })
    }

    // 이벤트 객체를 활용한 함수 작성
    let p5 = document.querySelector("#p5")
    // 이벤트 객체는 이벤트 리스너가 전달
    // html 속성에서는 이벤트 객체x -> undefined
    p5.addEventListener("click",printText)
    function printText(event) {
        event.target.innerHTML = "값이 바뀝니다"
        console.dir(event)
    }

    // p6을 가져와서 이벤트와 함수 작성
    const p6 = document.querySelector("#p6")
    p6.addEventListener("click", changeColor)
    p6.addEventListener("dblclick", changeColor)

    // 사용할 함수
    function changeColor(event) {
        // 이벤트에 따라서
        if(event.type=="click") {
            event.target.style.color = "blue"
        }
        else if(event.type=="dblclick") {
            event.target.style.backgroundColor = "gray"
        }
    }

    // h3 태그에 미리 만든 함수 적용
    let h3 = document.querySelector("#h3")
    h3.addEventListener("click",changeColor)
    h3.addEventListener("dblclick",changeColor)

    let ullist2 = document.querySelectorAll("#ullist2>li")
    for(let i=0; i<ullist2.length; i++){
    ullist2[i].addEventListener("click",changeColor)
    ullist2[i].addEventListener("dblclick",changeColor)
    }

    // 이벤트리스너에 작성하는 함수에 인수값을 넣어서 사용
    const p05 = document.querySelector("#p05")
    const p06 = document.querySelector("#p06")
    const p07 = document.querySelector("#p07")

    // 함수를 넣어줄 때 그 이름만 넣어주거나, 익명함수로만 작성
    // 함수의 인수가 필요하다면 익명함수 안에 함수 호출해서 사용
    p05.addEventListener("click", function(event){
        printInnerHTML(event, "내용을 바꿉니다");
    })
    // 호출해서 쓰는 함수가 하나라면 화살표 함수를 많이 쓴다
    p06.addEventListener("click", event => 
        printInnerHTML(event, "다시 수정하여 작성")
    )
    p07.addEventListener("click", event => 
        printInnerHTML(event, "수정완료")
    )

    function printInnerHTML(event,string) {
        event.target.innerHTML = string;
    }
    </script>
</body>
</html>